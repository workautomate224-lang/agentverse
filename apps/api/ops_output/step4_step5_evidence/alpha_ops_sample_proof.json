{
  "evidence_type": "alpha_ops_sampling",
  "step": "5.2",
  "timestamp": "2026-01-11T20:15:00Z",
  "status": "IMPLEMENTED",

  "implementation": {
    "script_file": "apps/api/scripts/alpha_ops_sampler.py"
  },

  "sampling_modes": {
    "daily": {
      "description": "Sample 5 random runs from yesterday",
      "command": "python alpha_ops_sampler.py --mode daily",
      "output": "daily_sample_{YYYYMMDD}.json"
    },
    "weekly": {
      "description": "Generate weekly failure summary (7 days)",
      "command": "python alpha_ops_sampler.py --mode weekly",
      "output": "weekly_summary_{YYYYMMDD}.json"
    }
  },

  "sample_size": {
    "runs_per_day": 5,
    "random_selection": true
  },

  "validation_checks": {
    "rep_files": [
      "manifest.json",
      "trace.ndjson",
      "llm_ledger.ndjson",
      "universe_graph.json",
      "report.md"
    ],
    "llm_metrics": true,
    "token_counts": true
  },

  "daily_sample_schema": {
    "sample_date": "string",
    "runs_sampled": "int",
    "runs_valid": "int",
    "runs_invalid": "int",
    "total_llm_calls": "int",
    "total_tokens": "int",
    "runs": [
      {
        "run_id": "string",
        "project_id": "string",
        "user_id": "string",
        "status": "string",
        "created_at": "string",
        "ended_at": "string",
        "rep_valid": "bool",
        "rep_files": ["string"],
        "rep_missing": ["string"],
        "llm_call_count": "int",
        "token_count": "int",
        "error_message": "string",
        "validation_errors": ["string"]
      }
    ]
  },

  "weekly_summary_schema": {
    "week_start": "string",
    "week_end": "string",
    "total_runs_sampled": "int",
    "total_runs_valid": "int",
    "total_runs_invalid": "int",
    "failure_rate": "float",
    "common_failures": {"failure_type": "count"},
    "daily_samples": ["DailySample"],
    "recommendations": ["string"]
  },

  "automated_recommendations": [
    "High failure rate detection",
    "Missing LLM ledger detection",
    "Missing trace file detection",
    "All metrics acceptable message"
  ],

  "environment_variables": {
    "STAGING_API_URL": "Staging API URL",
    "STAGING_OPS_API_KEY": "API key for ops endpoints"
  },

  "verification": {
    "script_exists": true,
    "daily_mode": true,
    "weekly_mode": true,
    "rep_validation": true,
    "json_output": true,
    "failure_tracking": true
  }
}
